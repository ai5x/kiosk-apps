#!/bin/bash
# Openbox Autostart - Landscape Mode
# No screen rotation applied

# Apply display configuration (ensures HDMI is configured even if hotplugged)
if [ -x "/opt/kiosk-apps/scripts/apply-display-config.sh" ]; then
    /opt/kiosk-apps/scripts/apply-display-config.sh 2>> /tmp/openbox-autostart.log &
fi

# Disable screen blanking and power management
xset s off
xset -dpms
xset s noblank

# Disable CPU and PCIe power management for industrial reliability
if [ -x "/opt/kiosk-apps/scripts/disable-power-management.sh" ]; then
    /opt/kiosk-apps/scripts/disable-power-management.sh 2>> /tmp/openbox-autostart.log
fi

# Hide mouse cursor after inactivity
unclutter -idle 0.1 -root &

# Start kiosk application
/opt/kiosk/start-kiosk.sh &
